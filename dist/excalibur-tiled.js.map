{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bd6e643721e50b60ff69","webpack:///./src/index.ts","webpack:///external {\"commonjs\":\"excalibur\",\"commonjs2\":\"excalibur\",\"amd\":\"excalibur\",\"root\":\"ex\"}"],"names":[],"mappings":"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","file":"excalibur-tiled.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"excalibur\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"excalibur\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Extensions.Tiled\"] = factory(require(\"excalibur\"));\n\telse\n\t\troot[\"Extensions.Tiled\"] = factory(root[\"ex\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd6e643721e50b60ff69","import {\r\n   Resource,\r\n   Promise,\r\n   Texture,\r\n   TileMap,\r\n   TileSprite,\r\n   SpriteSheet,\r\n   Logger\r\n} from 'excalibur';\r\nimport { ITiledMap, ITiledTileSet } from './ITiledMap';\r\n\r\nexport enum TiledMapFormat {\r\n\r\n   /**\r\n    * TMX map layer format\r\n    * @unsupported\r\n    */\r\n   TMX,\r\n\r\n   /**\r\n    * JSON map layer format\r\n    */\r\n   JSON\r\n}\r\n\r\nexport default class TiledResource extends Resource<ITiledMap> {\r\n\r\n   protected mapFormat: TiledMapFormat;\r\n\r\n   public imagePathAccessor: (path: string, ts: ITiledTileSet) => string;\r\n\r\n   constructor(path: string, mapFormat = TiledMapFormat.JSON) {\r\n      switch (mapFormat) {\r\n         case TiledMapFormat.JSON:\r\n            super(path, \"application/json\");\r\n            break;\r\n         default:\r\n            throw `The format ${mapFormat} is not currently supported. Please export Tiled map as JSON.`;\r\n      }\r\n\r\n      this.mapFormat = mapFormat;\r\n      this.imagePathAccessor = (p) => {\r\n\r\n         // Use absolute path if specified\r\n         if (p.indexOf('/') === 0) {\r\n            return p;\r\n         }\r\n\r\n         // Load relative to map path\r\n         let pp = path.split('/');\r\n         let relPath = pp.concat([]);\r\n\r\n         if (pp.length > 0) {\r\n            // remove file part of path\r\n            relPath.splice(-1);\r\n         }\r\n         relPath.push(p);\r\n         return relPath.join('/');\r\n      };\r\n   }\r\n\r\n   public load(): Promise<ITiledMap> {\r\n      var p = new Promise<ITiledMap>();\r\n\r\n      super.load().then(map => {\r\n\r\n         var promises: Promise<HTMLImageElement>[] = [];\r\n\r\n         // retrieve images from tilesets and create textures\r\n         this.data.tilesets.forEach(ts => {\r\n            var tx = new Texture(this.imagePathAccessor(ts.image, ts));\r\n            ts.imageTexture = tx;\r\n            promises.push(tx.load());\r\n\r\n            Logger.getInstance().debug(\"[Tiled] Loading associated tileset: \" + ts.image);\r\n         });\r\n\r\n         Promise.join.apply(this, promises).then(() => {\r\n            p.resolve(map);\r\n         }, (value?: any) => {\r\n            p.reject(value);\r\n         });\r\n      });\r\n\r\n      return p;\r\n   }\r\n\r\n   public processData(data: any): ITiledMap {\r\n      if (typeof data !== \"string\") {\r\n         throw `Tiled map resource ${this.path} is not the correct content type`;\r\n      }\r\n      if (data === void 0) {\r\n         throw `Tiled map resource ${this.path} is empty`;\r\n      }\r\n\r\n      switch (this.mapFormat) {\r\n         case TiledMapFormat.JSON:\r\n            return parseJsonMap(data);\r\n      }\r\n   }\r\n\r\n   public getTilesetForTile(gid: number): ITiledTileSet {\r\n      for (var i = this.data.tilesets.length - 1; i >= 0; i--) {\r\n         var ts = this.data.tilesets[i];\r\n\r\n         if (ts.firstgid <= gid) {\r\n            return ts;\r\n         }\r\n      }\r\n\r\n      return null;\r\n   }\r\n\r\n   public getTileMap(): TileMap {\r\n      var map = new TileMap(0, 0, this.data.tilewidth, this.data.tileheight, this.data.height, this.data.width);\r\n\r\n      // register sprite sheets for each tileset in map\r\n      for (var ts of this.data.tilesets) {\r\n         var cols = Math.floor(ts.imagewidth / ts.tilewidth);\r\n         var rows = Math.floor(ts.imageheight / ts.tileheight);\r\n         var ss = new SpriteSheet(ts.imageTexture, cols, rows, ts.tilewidth, ts.tileheight);\r\n\r\n         map.registerSpriteSheet(ts.firstgid.toString(), ss);\r\n      }\r\n\r\n      for (var layer of this.data.layers) {\r\n\r\n         if (layer.type === \"tilelayer\") {\r\n            for (var i = 0; i < layer.data.length; i++) {\r\n               let gid = <number>layer.data[i];\r\n\r\n               if (gid !== 0) {\r\n                  var ts = this.getTilesetForTile(gid);\r\n\r\n                  map.data[i].sprites.push(new TileSprite(ts.firstgid.toString(), gid - ts.firstgid))\r\n               }\r\n            }\r\n         }\r\n      }\r\n\r\n      return map;\r\n   }\r\n}\r\n\r\n/**\r\n * Handles parsing of JSON tiled data\r\n */\r\nvar parseJsonMap = (data: string): ITiledMap => {\r\n   var json = <ITiledMap>JSON.parse(data);\r\n\r\n   // Decompress layers\r\n   if (json.layers) {\r\n      for (var layer of json.layers) {\r\n\r\n         if (typeof layer.data === \"string\") {\r\n\r\n            if (layer.encoding === \"base64\") {\r\n               layer.data = decompressors.decompressBase64(<string>layer.data, layer.encoding);\r\n            }\r\n\r\n         } else {\r\n            layer.data = decompressors.decompressCsv(<number[]>layer.data);\r\n         }\r\n\r\n      }\r\n   }\r\n\r\n   return json;\r\n}\r\n\r\n/**\r\n * Decompression implementations\r\n */\r\nvar decompressors = {\r\n\r\n   /**\r\n    * Simplest (passes data through since it's uncompressed)\r\n    */\r\n   decompressCsv: (data: number[]) => {\r\n      return data;\r\n   },\r\n\r\n   /**\r\n    * Uses base64.js implementation to decode string into byte array\r\n    * and then converts (with/without compression) to array of numbers\r\n    */\r\n   decompressBase64: (b64: string, encoding: string) => {\r\n      var i: number,\r\n         j: number,\r\n         l: number,\r\n         tmp: number,\r\n         placeHolders: number,\r\n         arr: number[] | Uint8Array;\r\n\r\n      if (b64.length % 4 > 0) {\r\n         throw new Error('Invalid string. Length must be a multiple of 4')\r\n      }\r\n\r\n      var Arr = (typeof Uint8Array !== 'undefined')\r\n         ? Uint8Array\r\n         : Array;\r\n\r\n      var PLUS = '+'.charCodeAt(0);\r\n      var SLASH = '/'.charCodeAt(0);\r\n      var NUMBER = '0'.charCodeAt(0);\r\n      var LOWER = 'a'.charCodeAt(0);\r\n      var UPPER = 'A'.charCodeAt(0);\r\n      var PLUS_URL_SAFE = '-'.charCodeAt(0);\r\n      var SLASH_URL_SAFE = '_'.charCodeAt(0);\r\n\r\n      function decode(elt) {\r\n         var code = elt.charCodeAt(0)\r\n         if (code === PLUS || code === PLUS_URL_SAFE) return 62 // '+'\r\n         if (code === SLASH || code === SLASH_URL_SAFE) return 63 // '/'\r\n         if (code < NUMBER) return -1 // no match\r\n         if (code < NUMBER + 10) return code - NUMBER + 26 + 26\r\n         if (code < UPPER + 26) return code - UPPER\r\n         if (code < LOWER + 26) return code - LOWER + 26\r\n      }\r\n\r\n      // the number of equal signs (place holders)\r\n      // if there are two placeholders, than the two characters before it\r\n      // represent one byte\r\n      // if there is only one, then the three characters before it represent 2 bytes\r\n      // this is just a cheap hack to not do indexOf twice\r\n      var len = b64.length\r\n      placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0\r\n\r\n      // base64 is 4/3 + up to two characters of the original data\r\n      arr = new Arr(b64.length * 3 / 4 - placeHolders)\r\n\r\n      // if there are placeholders, only get up to the last complete 4 chars\r\n      l = placeHolders > 0 ? b64.length - 4 : b64.length\r\n\r\n      var L = 0\r\n\r\n      function push(v) {\r\n         arr[L++] = v\r\n      }\r\n\r\n      for (i = 0, j = 0; i < l; i += 4, j += 3) {\r\n         tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\r\n         push((tmp & 0xFF0000) >> 16)\r\n         push((tmp & 0xFF00) >> 8)\r\n         push(tmp & 0xFF)\r\n      }\r\n\r\n      if (placeHolders === 2) {\r\n         tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\r\n         push(tmp & 0xFF)\r\n      } else if (placeHolders === 1) {\r\n         tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\r\n         push((tmp >> 8) & 0xFF)\r\n         push(tmp & 0xFF)\r\n      }\r\n\r\n      // Byte array\r\n      // TODO handle compression\r\n\r\n      var toNumber = function (byteArray: number[] | Uint8Array) {\r\n         var value = 0;\r\n\r\n         for (var i = byteArray.length - 1; i >= 0; i--) {\r\n            value = (value * 256) + byteArray[i] * 1;\r\n         }\r\n\r\n         return value;\r\n      };\r\n\r\n      var resultLen = arr.length / 4;\r\n      var result = new Array<number>(resultLen);\r\n\r\n      for (i = 0; i < resultLen; i++) {\r\n         result[i] = toNumber(arr.slice(i * 4, i * 4 + 3));\r\n      }\r\n\r\n      return result;\r\n   }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"excalibur\",\"commonjs2\":\"excalibur\",\"amd\":\"excalibur\",\"root\":\"ex\"}\n// module id = 1\n// module chunks = 0 1"],"sourceRoot":""}